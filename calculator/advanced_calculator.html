<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Calculator</title>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, sans-serif;
}

body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: linear-gradient(to right, #0f172a, #1e293b);
}

.calculator {
    background: #111827;
    padding: 20px;
    border-radius: 15px;
    width: 320px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
}

.display {
    width: 100%;
    height: 70px;
    background: #1f2937;
    color: white;
    text-align: right;
    font-size: 28px;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 15px;
    overflow-x: auto;
}

.buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 10px;
}

button {
    padding: 18px;
    font-size: 18px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: 0.2s ease;
}

button:hover {
    transform: scale(1.05);
}

.operator {
    background: #f59e0b;
    color: white;
}

.equal {
    background: #10b981;
    color: white;
    grid-column: span 2;
}

.clear {
    background: #ef4444;
    color: white;
}

.backspace {
    background: #6366f1;
    color: white;
}
</style>
</head>

<body>

<div class="calculator">
    <div class="display" id="display">0</div>

    <div class="buttons">
        <button class="clear">C</button>
        <button class="backspace">⌫</button>
        <button class="operator">/</button>
        <button class="operator">*</button>

        <button>7</button>
        <button>8</button>
        <button>9</button>
        <button class="operator">-</button>

        <button>4</button>
        <button>5</button>
        <button>6</button>
        <button class="operator">+</button>

        <button>1</button>
        <button>2</button>
        <button>3</button>
        <button>0</button>

        <button>.</button>
        <button class="equal">=</button>
    </div>
</div>

<script>
let display = document.getElementById("display");
let buttons = document.querySelectorAll("button");

let currentInput = "";

// Function to update display
function updateDisplay() {
    display.textContent = currentInput || "0";
}

// Safe calculation without eval
function calculateExpression(expression) {
    try {
        let result = Function('"use strict"; return (' + expression + ')')();
        return result;
    } catch {
        return "Error";
    }
}

// Button click handling
buttons.forEach(button => {
    button.addEventListener("click", () => {
        let value = button.textContent;

        if (value === "C") {
            currentInput = "";
        } 
        else if (value === "⌫") {
            currentInput = currentInput.slice(0, -1);
        } 
        else if (value === "=") {
            currentInput = calculateExpression(currentInput).toString();
        } 
        else {
            currentInput += value;
        }

        updateDisplay();
    });
});

// Keyboard Support
document.addEventListener("keydown", (e) => {
    if ((e.key >= "0" && e.key <= "9") || ["+", "-", "*", "/", "."].includes(e.key)) {
        currentInput += e.key;
    } 
    else if (e.key === "Enter") {
        currentInput = calculateExpression(currentInput).toString();
    } 
    else if (e.key === "Backspace") {
        currentInput = currentInput.slice(0, -1);
    } 
    else if (e.key === "Escape") {
        currentInput = "";
    }

    updateDisplay();
});
</script>

</body>
</html>
